// ==UserScript==
// @name         ATOSS++
// @namespace    http://tampermonkey.net/
// @version      1.5.0
// @description  fixes stuff atoss is too dumb to fix themselves
// @updateURL   https://raw.githubusercontent.com/ArbeitsAccount/ATOSS-/refs/heads/main/main.js
// @downloadURL https://raw.githubusercontent.com/ArbeitsAccount/ATOSS-/refs/heads/main/main.js
// @author       Robin Feuerer
// @match        https://hoffmann-group.atoss.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=atoss.com
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==

function _0x560b(){const _0x46cf9c=['display','#1e2124','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1\x20id=\x22popupTitle\x22><strong>Atoss++</strong></h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22popupText\x22>Bist\x20du\x20schon\x20über\x2018?</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20center;font-family:\x20\x27Segoe\x20UI\x27,\x20\x27Lato\x27,\x20sans-serif;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22yesButton\x22\x20style=\x22margin:\x200\x2010px;\x20color:\x20black;\x20background-color:\x20#ff7000;\x22>Ja</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22noButton\x22\x20style=\x22margin:\x200\x2010px;\x20color:\x20black;\x20background-color:\x20grey;\x22>Nein</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.info-element.info-element-basictext.info-element-normal','childList','26563082GCZQuv','startsWith','contentWindow','center','opacity','ATOSS++','.info-element.info-element-default','zIndex','width','href','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1\x20id=\x22reset\x22;\x20style=\x22font-size\x20:\x2014px;position\x20:\x20absolute;\x20bottom:\x205px;\x20font-family:\x20\x27Segoe\x20UI\x27,\x20\x27Lato\x27,\x20sans-serif;cursor:\x20pointer;\x22>Daten\x20zurücksetzen</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Pause\x20/\x20Anwesenheitsende\x20stempeln','innerHeight','click','querySelector','type','17.5%','padStart','transparent','slice','resize','body','noButton','getSeconds','forEach','18+','length','.data-list-body-cell-wrapper','document','Disabled\x20unused\x20button','createElement','applicationIframe','7:42','textContent','663996fwIdcQ','querySelectorAll','abs','none','fontSize','padding','backgroundColor','fixed','contentDocument','textAlign','Stunden','4216168vVhFec','reload','div','.info-element.info-element-button.info-element-normal','innerHTML','20px','7426650csMrIM','1:00','log','left','.data-list-body-cell.dataCell.labelValueCell','observe','style','Anwesenheitsbeginn\x20stempeln','1694766rhNCRq','removeAttribute','translate(-50%,\x20-50%)','0:30','getMinutes','map','max','setAttribute','getElementById','split','5503975OmlXeX','block','popupText','height','\x20|\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#applicationIframe\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20filter:\x20blur(10px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','filter','addEventListener','classList','top','Script\x20executed','yesButton','appendChild','children','load','50%','iframe','160px','1px\x20solid\x20#ff7000','getHours','contains','transform','head','disabled','location','position','1000','color','disconnect','reset','Gehen','Reactivated','1436523QOqgTr'];_0x560b=function(){return _0x46cf9c;};return _0x560b();}function _0x1601(_0x22edbb,_0x30d7ea){const _0x560bbe=_0x560b();return _0x1601=function(_0x1601d6,_0x34decd){_0x1601d6=_0x1601d6-0x10d;let _0x3a2c96=_0x560bbe[_0x1601d6];return _0x3a2c96;},_0x1601(_0x22edbb,_0x30d7ea);}(function(_0x1530a9,_0xbd5e69){const _0x13a311=_0x1601,_0xa4f6c2=_0x1530a9();while(!![]){try{const _0x1e5f73=parseInt(_0x13a311(0x146))/0x1+-parseInt(_0x13a311(0x15f))/0x2+parseInt(_0x13a311(0x11e))/0x3+-parseInt(_0x13a311(0x151))/0x4+-parseInt(_0x13a311(0x169))/0x5+-parseInt(_0x13a311(0x157))/0x6+parseInt(_0x13a311(0x124))/0x7;if(_0x1e5f73===_0xbd5e69)break;else _0xa4f6c2['push'](_0xa4f6c2['shift']());}catch(_0x477270){_0xa4f6c2['push'](_0xa4f6c2['shift']());}}}(_0x560b,0xaa4e0),(function(){'use strict';const _0x29b439=_0x1601;console[_0x29b439(0x159)](_0x29b439(0x173));function _0x4d157b(_0x3cf8d3,_0x446c58){const _0x5b87c3=_0x29b439,_0x40064e=_0x3cf8d3[_0x5b87c3(0x125)]('-'),_0x44b29a=_0x446c58[_0x5b87c3(0x125)]('-');_0x40064e&&(_0x3cf8d3=_0x3cf8d3[_0x5b87c3(0x137)](0x1));_0x44b29a&&(_0x446c58=_0x446c58[_0x5b87c3(0x137)](0x1));const _0x159ce0=_0x3cf8d3[_0x5b87c3(0x168)](':'),_0x8df03f=_0x446c58[_0x5b87c3(0x168)](':'),_0x177996=new Date(0x0,0x0,0x0,parseInt(_0x159ce0[0x0]),parseInt(_0x159ce0[0x1])),_0xb94b12=new Date(0x0,0x0,0x0,parseInt(_0x8df03f[0x0]),parseInt(_0x8df03f[0x1]));let _0x330526=_0x177996[_0x5b87c3(0x111)]()*0x3c+_0x177996[_0x5b87c3(0x163)](),_0x51caa2=_0xb94b12[_0x5b87c3(0x111)]()*0x3c+_0xb94b12[_0x5b87c3(0x163)]();_0x40064e&&(_0x330526=-_0x330526);_0x44b29a&&(_0x51caa2=-_0x51caa2);let _0xf69a09=_0x330526+_0x51caa2;const _0x2655eb=Math['floor'](Math[_0x5b87c3(0x148)](_0xf69a09)/0x3c),_0x18fd64=Math[_0x5b87c3(0x148)](_0xf69a09)%0x3c;let _0x3d3ba0=String(_0x2655eb)[_0x5b87c3(0x135)](0x2,'0')+':'+String(_0x18fd64)[_0x5b87c3(0x135)](0x2,'0');return _0xf69a09<0x0&&(_0x3d3ba0='-'+_0x3d3ba0),_0x3d3ba0;}function _0x4701e9(_0x51d45d,_0x5eef16){const _0x53ca26=_0x29b439,_0x2cd03c=_0x51d45d['startsWith']('-'),_0x5a0382=_0x5eef16[_0x53ca26(0x125)]('-');_0x2cd03c&&(_0x51d45d=_0x51d45d[_0x53ca26(0x137)](0x1));_0x5a0382&&(_0x5eef16=_0x5eef16[_0x53ca26(0x137)](0x1));const _0x20cc92=_0x51d45d[_0x53ca26(0x168)](':'),_0x2bb9c1=_0x5eef16[_0x53ca26(0x168)](':'),_0x3602e3=new Date(0x0,0x0,0x0,parseInt(_0x20cc92[0x0]),parseInt(_0x20cc92[0x1])),_0x458534=new Date(0x0,0x0,0x0,parseInt(_0x2bb9c1[0x0]),parseInt(_0x2bb9c1[0x1]));let _0x46a2ca=_0x3602e3[_0x53ca26(0x111)]()*0x3c+_0x3602e3[_0x53ca26(0x163)](),_0x15af1b=_0x458534[_0x53ca26(0x111)]()*0x3c+_0x458534['getMinutes']();_0x2cd03c&&(_0x46a2ca=-_0x46a2ca);_0x5a0382&&(_0x15af1b=-_0x15af1b);let _0x216bbd=_0x46a2ca-_0x15af1b;const _0x48c86e=Math['floor'](Math[_0x53ca26(0x148)](_0x216bbd)/0x3c),_0x23647e=Math['abs'](_0x216bbd)%0x3c;let _0x1d373f=String(_0x48c86e)[_0x53ca26(0x135)](0x2,'0')+':'+String(_0x23647e)['padStart'](0x2,'0');return _0x216bbd<0x0&&(_0x1d373f='-'+_0x1d373f),_0x1d373f;}function _0x5ae5d8(){const _0x12ab3e=_0x29b439,_0x259ae0=new Date(),_0x2618d5=String(_0x259ae0['getHours']())[_0x12ab3e(0x135)](0x2,'0'),_0x50ce1f=String(_0x259ae0[_0x12ab3e(0x163)]())['padStart'](0x2,'0');return _0x2618d5+':'+_0x50ce1f;}function _0x4e802d(_0x322a2f,_0x4e059a,_0x609c19=_0x29b439(0x150)){const _0x45cebc=_0x29b439,_0x584cd1={'childList':!![],'subtree':!![]},_0x4fd5dc=function(_0xce137d,_0x3753bd){const _0x54824a=_0x1601;for(let _0xc16a69 of _0xce137d){if(_0xc16a69[_0x54824a(0x133)]===_0x54824a(0x123)){_0x3753bd['disconnect'](),_0x322a2f[_0x54824a(0x147)](_0x54824a(0x13f))[0x4][_0x54824a(0x176)][0x0][_0x54824a(0x155)]=_0x609c19,_0x2c32dd(_0x322a2f);break;}}},_0x583a24=new MutationObserver(_0x4fd5dc);_0x583a24[_0x45cebc(0x15c)](_0x4e059a,_0x584cd1);}function _0x2c32dd(_0x2379ff){console['log']('update\x20page');let _0x5bcb42=[];const _0x4985ee=setInterval(()=>{const _0x1c73bb=_0x1601;_0x5bcb42=_0x2379ff[_0x1c73bb(0x147)](_0x1c73bb(0x15b));if(_0x5bcb42[_0x1c73bb(0x13e)]>0x0){clearInterval(_0x4985ee);let _0x196c1e={},_0x4a79f6,_0x1e9111,_0x266312;_0x5bcb42[_0x1c73bb(0x13c)](function(_0x1487bb){const _0x21fe0c=_0x1c73bb;_0x4a79f6=_0x1487bb['children'][0x0][_0x21fe0c(0x176)][0x0]['innerHTML'],_0x4a79f6===_0x21fe0c(0x11c)&&(_0x266312=_0x1487bb[_0x21fe0c(0x176)][0x0]['children'][0x2]),_0x1487bb[_0x21fe0c(0x176)][0x0][_0x21fe0c(0x176)][0x2]['childElementCount']>0x0?_0x1e9111=_0x1487bb[_0x21fe0c(0x176)][0x0][_0x21fe0c(0x176)][0x2][_0x21fe0c(0x145)]:_0x1e9111=_0x1487bb['children'][0x0][_0x21fe0c(0x176)][0x2]['innerHTML'],_0x196c1e[_0x4a79f6]=_0x1e9111;});const _0x1d938e=_0x196c1e['Heutige\x20Pause'];if(_0x196c1e['Status']==='Anwesend'){const [_0x3bd1f2,_0x3eeb8e]=_0x1d938e[_0x1c73bb(0x168)](':')[_0x1c73bb(0x164)](Number);let _0x2f7c09=_0x1d938e;GM_getValue(_0x1c73bb(0x13d))===!![]?_0x3eeb8e<0x1e&&_0x3bd1f2<0x0&&(_0x2f7c09=_0x1c73bb(0x162)):_0x3bd1f2<0x1&&(_0x2f7c09=_0x1c73bb(0x158)),_0x266312[_0x1c73bb(0x155)]=_0x4d157b(_0x4d157b(_0x196c1e['Kommen'],_0x1c73bb(0x144)),_0x2f7c09),_0x4e802d(_0x2379ff,_0x2379ff[_0x1c73bb(0x147)](_0x1c73bb(0x122))[0x1]);}else{const _0x595a52=_0x2379ff[_0x1c73bb(0x147)](_0x1c73bb(0x13f)),_0x55ebc6=_0x5ae5d8(),_0x3a515b=_0x4701e9(_0x55ebc6,_0x266312);if(_0x1d938e==='0:00')_0x595a52[0x4][_0x1c73bb(0x176)][0x0][_0x1c73bb(0x155)]=_0x3a515b;else{const _0xcb314e=_0x4d157b(_0x4701e9(_0x55ebc6,_0x266312),_0x1d938e);_0x595a52[0x4]['children'][0x0][_0x1c73bb(0x155)]=_0x3a515b+_0x1c73bb(0x16d)+_0xcb314e;}_0x4e802d(_0x2379ff,_0x2379ff[_0x1c73bb(0x132)](_0x1c73bb(0x122)),_0x595a52[0x4][_0x1c73bb(0x176)][0x0][_0x1c73bb(0x155)]);}}},0x3e8);}window[_0x29b439(0x170)]('load',function(){const _0x54018f=_0x29b439;window[_0x54018f(0x116)][_0x54018f(0x12d)]==='https://hoffmann-group.atoss.com/hoffmanngroupprod/html?security.sso=true'&&(GM_getValue('18+')===undefined?setTimeout(function(){const _0x360f91=_0x54018f;var _0x551c7f=document['createElement'](_0x360f91(0x153));_0x551c7f['id']=_0x360f91(0x129),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x117)]=_0x360f91(0x14d),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x15a)]=_0x360f91(0x10d),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x172)]=_0x360f91(0x134),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x113)]=_0x360f91(0x161),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x14b)]='20px',_0x551c7f[_0x360f91(0x15d)]['color']='#ff7000',_0x551c7f['style'][_0x360f91(0x14c)]=_0x360f91(0x120),_0x551c7f[_0x360f91(0x15d)]['border']=_0x360f91(0x110),_0x551c7f['style'][_0x360f91(0x12b)]=_0x360f91(0x118),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x11f)]=_0x360f91(0x149),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x16c)]='35%',_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x14f)]=_0x360f91(0x127),_0x551c7f[_0x360f91(0x155)]=_0x360f91(0x121),document[_0x360f91(0x139)][_0x360f91(0x175)](_0x551c7f);function _0x301e28(){const _0x2e82ee=_0x360f91;var _0x141739=window[_0x2e82ee(0x130)],_0x424593=Math[_0x2e82ee(0x165)](0x14,_0x141739/0xa)+'px',_0x30f425=Math[_0x2e82ee(0x165)](0x14,_0x141739/0x14)+'%';document[_0x2e82ee(0x167)]('popupTitle')['style'][_0x2e82ee(0x14a)]=_0x424593,document['getElementById'](_0x2e82ee(0x16b))[_0x2e82ee(0x15d)][_0x2e82ee(0x14a)]=_0x424593,document[_0x2e82ee(0x167)](_0x2e82ee(0x174))[_0x2e82ee(0x15d)]['fontSize']=_0x424593,document[_0x2e82ee(0x167)](_0x2e82ee(0x13a))[_0x2e82ee(0x15d)]['fontSize']=_0x424593,document[_0x2e82ee(0x167)](_0x2e82ee(0x13a))[_0x2e82ee(0x15d)][_0x2e82ee(0x12c)]=_0x30f425,document[_0x2e82ee(0x167)]('yesButton')[_0x2e82ee(0x15d)][_0x2e82ee(0x12c)]=_0x30f425,_0x551c7f[_0x2e82ee(0x15d)][_0x2e82ee(0x12c)]=_0x30f425;}_0x301e28(),window[_0x360f91(0x170)](_0x360f91(0x138),_0x301e28),_0x551c7f[_0x360f91(0x15d)][_0x360f91(0x11f)]='block';var _0x5771e5=document[_0x360f91(0x142)](_0x360f91(0x15d));_0x5771e5[_0x360f91(0x155)]=_0x360f91(0x16e),document[_0x360f91(0x114)][_0x360f91(0x175)](_0x5771e5),document[_0x360f91(0x167)]('noButton')[_0x360f91(0x170)](_0x360f91(0x131),function(){const _0x1c0db8=_0x360f91;_0x551c7f[_0x1c0db8(0x15d)][_0x1c0db8(0x11f)]=_0x1c0db8(0x149),document[_0x1c0db8(0x167)](_0x1c0db8(0x143))[_0x1c0db8(0x15d)][_0x1c0db8(0x16f)]=_0x1c0db8(0x149),GM_setValue(_0x1c0db8(0x13d),![]);}),document[_0x360f91(0x167)](_0x360f91(0x174))[_0x360f91(0x170)]('click',function(){const _0x19592a=_0x360f91;_0x551c7f[_0x19592a(0x15d)][_0x19592a(0x11f)]=_0x19592a(0x149),document[_0x19592a(0x167)](_0x19592a(0x143))['style'][_0x19592a(0x16f)]=_0x19592a(0x149),GM_setValue(_0x19592a(0x13d),!![]);});},0x3e8):setTimeout(function(){const _0x2d4b31=_0x54018f;var _0x281d3c=document[_0x2d4b31(0x142)]('div');_0x281d3c['id']=_0x2d4b31(0x11b),_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x117)]='fixed',_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x15a)]=_0x2d4b31(0x10f),_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x172)]='14px',_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x113)]=_0x2d4b31(0x161),_0x281d3c[_0x2d4b31(0x15d)]['padding']=_0x2d4b31(0x156),_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x119)]='#c2c5cc',_0x281d3c[_0x2d4b31(0x15d)]['backgroundColor']=_0x2d4b31(0x136),_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x12b)]=_0x2d4b31(0x118),_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x11f)]=_0x2d4b31(0x16a),_0x281d3c['style'][_0x2d4b31(0x16c)]='28px',_0x281d3c[_0x2d4b31(0x15d)][_0x2d4b31(0x14f)]='center',_0x281d3c['innerHTML']=_0x2d4b31(0x12e),document[_0x2d4b31(0x139)][_0x2d4b31(0x175)](_0x281d3c),document['getElementById'](_0x2d4b31(0x11b))[_0x2d4b31(0x170)](_0x2d4b31(0x131),function(){const _0x5e9121=_0x2d4b31;GM_setValue('18+',undefined),location[_0x5e9121(0x152)]();});},0xbb8));const _0x3a9ffe=document[_0x54018f(0x132)](_0x54018f(0x10e));if(!_0x3a9ffe)return;const _0x52d5ed=_0x44cf09=>{const _0x38d734=_0x54018f;return _0x44cf09['children'][0x0][_0x38d734(0x176)][0x0][_0x38d734(0x176)][0x1][_0x38d734(0x176)][0x0][_0x38d734(0x145)];};_0x3a9ffe[_0x54018f(0x170)](_0x54018f(0x177),function(){const _0x1dea2f=_0x54018f,_0x52374b=_0x3a9ffe[_0x1dea2f(0x14e)]||_0x3a9ffe[_0x1dea2f(0x126)][_0x1dea2f(0x140)];if(!_0x52374b)return;_0x2c32dd(_0x52374b);const _0x30bd47=new MutationObserver(_0x29f3e7=>{const _0xc0f5b=_0x1dea2f;let _0x398cab=![];_0x29f3e7[_0xc0f5b(0x13c)](_0x50d69e=>{const _0xc0387c=_0xc0f5b;if(!_0x398cab){_0x30bd47[_0xc0387c(0x11a)]();const _0x2bb818=_0x52374b[_0xc0387c(0x147)](_0xc0387c(0x154));_0x2bb818[_0xc0387c(0x13c)](_0x5adb24=>{const _0x44da3d=_0xc0387c,_0x249b3b=_0x52d5ed(_0x5adb24);if(_0x249b3b===_0x44da3d(0x15e)||_0x249b3b===_0x44da3d(0x12f)){if(!_0x5adb24[_0x44da3d(0x171)][_0x44da3d(0x112)]('highlighted')){_0x5adb24[_0x44da3d(0x166)](_0x44da3d(0x115),_0x44da3d(0x115)),_0x5adb24[_0x44da3d(0x15d)][_0x44da3d(0x128)]='0.2',console[_0x44da3d(0x159)](_0x44da3d(0x141));const _0x3c30dc=_0x52374b[_0x44da3d(0x132)](_0x44da3d(0x12a)),_0x5319e0=_0x3c30dc[_0x44da3d(0x176)][0x0][_0x44da3d(0x176)][0x0]['children'][0x1][_0x44da3d(0x176)][0x0],_0x107c3d=()=>{const _0x1d7f8a=_0x44da3d,_0x181126=new Date(),_0x47ffa7=_0x181126[_0x1d7f8a(0x13b)](),_0x2e9d75=0x3c-_0x47ffa7;_0x30bd47[_0x1d7f8a(0x11a)](),_0x5319e0[_0x1d7f8a(0x155)]='Sekunden\x20bis\x20zur\x20nächsten\x20Minute:\x20'+_0x2e9d75,_0x30bd47['observe'](_0x52374b[_0x1d7f8a(0x139)],{'childList':!![],'subtree':!![]});};_0x107c3d(),setInterval(_0x107c3d,0x3e8);}else _0x5adb24[_0x44da3d(0x160)](_0x44da3d(0x115)),_0x5adb24[_0x44da3d(0x15d)]['opacity']='1',console['log'](_0x44da3d(0x11d));}}),_0x398cab=!![];}_0x30bd47['observe'](_0x52374b[_0xc0387c(0x139)],{'childList':!![],'subtree':!![]});});});_0x30bd47[_0x1dea2f(0x15c)](_0x52374b[_0x1dea2f(0x139)],{'childList':!![],'subtree':!![]});});});}()));
